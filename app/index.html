<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  </head>
  <body id="ng-app" ng-app="gtestApp">
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="main-list-wrapper" ng-controller="listCtrl" ng-cloak>
          <div class="list-header">
            <span class="list-header-item gcol-2">Changelist / Build</span>
            <span class="list-header-item gcol-2">Owner</span>
            <span class="list-header-item gcol-2">Time Started</span>
            <span class="list-header-item gcol-1">State</span>
            <span class="list-header-item gcol-1">Metrics</span>
            <span class="list-header-item gcol-1">Build</span>
            <span class="list-header-item gcol-1">Unit Test</span>
            <span class="list-header-item gcol-1-5">Functional Test</span>
          </div>  
          <div class="list-item-wrapper" ng-repeat="item in items" ng-class="getItemClass(item)">
              <div class="list-item-trigger" ng-click="item.expanded = item.expanded ? !item.expanded : true">
                <span class="list-item gcol-0-5">
                  <span class="item-icon"></span>
                </span>
                <span class="list-item item-id gcol-1-5">{{ item.itemId }}</span>
                <span class="list-item item-owner gcol-2">{{ item.owner }}</span>
                <span class="list-item item-starttime gcol-2">{{ item.timeStarted }}</span>
                <span class="list-item item-state gcol-1">{{ item.state }}</span>
                <span class="list-item item-metrics gcol-1 fade" ng-if="!item.expanded">
                  <span class="item-bar" ng-class="getBarClass(item)"></span>
                </span>
                <span class="list-item item-build gcol-1" ng-if="!item.expanded">
                  <span class="item-bar" ng-class="getBarClass(item)"></span>
                </span>
                <span class="list-item item-utest gcol-1" ng-if="!item.expanded">
                  <span class="item-bar" ng-class="getBarClass(item)"></span>
                </span>
                <span class="list-item item-ftest gcol-1-5" ng-if="!item.expanded">
                  <span class="item-bar" ng-class="getBarClass(item)"></span>
                </span>
              </div>
              <div class="info slide" ng-show="item.expanded">
                <div class="info-sec metrics" ng-class="{ 'bad-metrics': isBadMetrics(item) }" ng-click="showDetails(item)">
                  <h3 class="info-sec-header">Metrics</h3>
                  <div class="metrics-item">
                    <span class="metrics-img test" 
                        ng-class="{ 'negative': item.metrics && item.metrics.test && !item.metrics.test.positive }">{{ item.metrics.test.value }}</span>
                    <span class="metrics-label">Test</span>
                  </div>
                  <div class="metrics-item">
                    <span class="metrics-img maintainability" 
                        ng-class="{ 'negative': item.metrics && item.metrics.maintainability && !item.metrics.maintainability.positive }">{{ item.metrics.maintainability.value }}</span>
                    <span class="metrics-label">Maintainability</span>
                  </div>
                  <div class="metrics-item">
                    <span class="metrics-img security" 
                        ng-class="{ 'negative': item.metrics && item.metrics.security && !item.metrics.security.positive }">{{ item.metrics.security.value }}</span>
                    <span class="metrics-label">Security</span>
                  </div>
                  <div class="metrics-item">
                    <span class="metrics-img workmanship" 
                        ng-class="{ 'negative': item.metrics && item.metrics.workmanship && !item.metrics.workmanship.positive }">{{ item.metrics.workmanship.value }}</span>
                    <span class="metrics-label">Workmanship</span>
                  </div>
                </div>
                <div class="info-sec build" ng-if="!isCritical(item)"  ng-click="showDetails(item)">
                  <h3  class="info-sec-header">Build</h3>
                  <div class="build-item" ng-if="item.build && item.build.debug">
                    <img src="images/pc_big.png" alt="pc-picture">
                    <span class="build-label">Debug</span>
                  </div>
                  <div class="build-item release" ng-if="item.build && item.build.release">
                    <img src="images/pc_big.png" alt="pc-picture">
                    <span class="build-label">Release</span>
                  </div>
                  <span class="start-date">{{ item.build.when }}</span>
                </div>
                <div class="info-sec utest" ng-if="!isCritical(item)" ng-click="showDetails(item)">
                  <h3  class="info-sec-header">Unit Test</h3>
                  <div class="info-chart-wrapper">
                    <div class="info-chart">
                      <div item-pie-chart item="item.utest" class="pie-chart"></div>
                    </div>
                    <div class="info-stat">
                      <p class="info-stat-value">{{ item.utest.positive }}%</p>
                      <p class="info-stat-label">tests passed</p>
                    </div>
                  </div>
                  <div class="test-coverage">
                    <progress class="test-coverage-html5-bar" max="100" value="{{ item.utest.coverage }}">
                      <div class="test-coverage-bar">
                          <span style="width: {{ item.utest.coverage }}%;"></span>
                      </div>
                    </progress>
                    <span class="test-coverage-label">{{ item.utest.coverage }}%</span><br>
                    <span class="test-coverage-text">code covered</span>
                  </div>
                </div>
                <div class="info-sec ftest" ng-if="!isCritical(item)" ng-click="showDetails(item)">
                  <h3  class="info-sec-header">Functional Test</h3>
                  <div class="info-chart-wrapper">
                    <div class="info-chart">
                      <div item-pie-chart item="item.ftest" class="pie-chart"></div>
                    </div>
                    <div class="info-stat">
                      <p class="info-stat-value">{{ item.ftest.positive }}%</p>
                      <p class="info-stat-label">tests passed</p>
                    </div>
                  </div>
                  <div class="test-coverage">
                    <progress class="test-coverage-html5-bar" max="100" value="{{ item.ftest.coverage }}">
                      <div class="test-coverage-bar">
                          <span style="width: {{ item.ftest.coverage }}%;"></span>
                      </div>
                    </progress>
                    <span class="test-coverage-label">{{ item.ftest.coverage }}%</span><br>
                    <span class="test-coverage-text">code covered</span>
                  </div>
                </div>
                <div class="info-sec status" ng-if="!isCritical(item)">
                  <h3 class="result-header">Result:</h3>
                  <p class="status">{{ item.result.status }}</p>
                  <p class="reason">{{ item.result.reason }}</p>
                  <a class="details firewall-accepted-details" href="javascript:;" ng-if="item.type === 'firewall' && item.state === 'Accepted'">Merged Build</a>
                  <a class="details firewall-rejected-details" href="javascript:;" ng-if="item.type === 'firewall' && item.state === 'Rejected'">Find issues</a>
                  <div ng-if="item.type === 'build'&& item.state === 'Complete'">
                    <a class="details build-complete-details" href="javascript:;">Deploy</a>
                    <span class="helper-text">to:</span>
                    <div class="env-select">
                      <select>
                        <option selected="selected">Production</option>
                        <option>Staging</option>
                        <option>QA</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
          </div>
    </div>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
     <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-XXXXX-X');
       ga('send', 'pageview');
    </script>

    <!-- build:js(.) scripts/oldieshim.js -->
    <!--[if lt IE 9]>
    <script src="bower_components/es5-shim/es5-shim.js"></script>
    <script src="bower_components/json3/lib/json3.js"></script>
    <![endif]-->
    <!-- endbuild -->

    <script src="items/items.js"></script>

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <script src="bower_components/angular-mocks/angular-mocks.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

        <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="scripts/app.js"></script>
        
        <script src="scripts/services/listItems.srv.js"></script>
        <script src="scripts/services/googleChartsPromise.fac.js"></script>
        <script src="scripts/directives/itemPieChart.dir.js"></script>

        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/animations/slide.anim.js"></script>
        <!-- endbuild -->
  </body>
</html>
